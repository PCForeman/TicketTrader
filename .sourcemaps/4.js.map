{"version":3,"sources":["../../src/pages/payment-modal/payment-modal.module.ts","../../src/pages/payment-modal/payment-modal.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { IonicPageModule } from \"ionic-angular\";\nimport { PaymentModalPage } from \"./payment-modal\";\n\n@NgModule({\n  declarations: [PaymentModalPage],\n  imports: [IonicPageModule.forChild(PaymentModalPage)]\n})\nexport class PaymentModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment-modal/payment-modal.module.ts","import { Component } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  NavParams,\r\n  ViewController,\r\n  AlertController,\r\n  ToastController,\r\n  NavController,\r\n  LoadingController,\r\n\r\n} from \"ionic-angular\";\r\nimport { AngularFireDatabase } from \"angularfire2/database\";\r\nimport { AES256 } from \"@ionic-native/aes-256\";\r\nimport { Stripe } from \"@ionic-native/stripe\";\r\nimport { AngularFireAuth } from \"angularfire2/auth\";\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-payment-modal\",\r\n  templateUrl: \"payment-modal.html\"\r\n})\r\nexport class PaymentModalPage {\r\n  constructor(\r\n    public navParams: NavParams,\r\n    private aCtrl: AlertController,\r\n    private vCtrl: ViewController,\r\n    private afDatabase: AngularFireDatabase,\r\n    private aes: AES256,\r\n    private toast: ToastController,\r\n    private navCtrl: NavController,\r\n    private stripe: Stripe,\r\n    private auth: AngularFireAuth,\r\n    private ldCtrl: LoadingController\r\n  ) { this.generateSecureKeyAndIV()}\r\n  private secureKey: string;\r\n  private secureIV: string;\r\n  private encryptedText: string\r\n  listingData: any;\r\n  cardName: any;\r\n  CVC: any;\r\n  cardNo: any;\r\n  expiry: any;\r\n  userId: any;\r\n  seconds: any;\r\n  minutes: any;\r\n  timer: any;\r\n  belowTen: any;\r\n  belowTenMin: any\r\n  ionViewWillLoad() {\r\n    this.userId = this.auth.auth.currentUser.uid;\r\n    const paymentApiKey = this.stripe.setPublishableKey(\r\n      \"pk_test_1bm2qsK0nhDrUlYHBhwITuLc003SgctrKa\"\r\n    );\r\n    const ticket = this.navParams.get(\"ticket\");\r\n    this.listingData = ticket;\r\n    this.minutes = this.listingData.mins;\r\n    this.seconds = this.listingData.seconds;\r\n    console.log(this.listingData);\r\n    this.useExistingCard();\r\n    this.checkOutTimer();\r\n  }\r\n\r\n  async generateSecureKeyAndIV() {\r\n    this.secureKey = await this.aes.generateSecureKey(\"at1x3fcaq\"); // Returns a 32 bytes string\r\n    this.secureIV = await this.aes.generateSecureIV(\"at1x3fcaq\"); // Returns a 16 bytes string\r\n  }\r\n\r\ndisplayLoader(){\r\n  let loading = this.ldCtrl.create({\r\n    content: 'Processing',\r\n    spinner: 'bubbles',\r\n    duration: 2000\r\n  });\r\n\r\n  loading.present();\r\n\r\n  setTimeout(() => {\r\n    loading.dismiss();\r\n  }, 5000);\r\n}\r\n\r\n async proccessCard() {\r\n   await this.displayLoader();\r\n    let card = {\r\n      number: \"4242424242424242\",\r\n      expMonth: 12,\r\n      expYear: 2020,\r\n      cvc: \"220\"\r\n    };\r\n    console.log(card);\r\n    this.stripe\r\n      .createCardToken(card)\r\n      .then(async payment => {\r\n        console.log(payment.card, payment.created, payment.id, payment.type);\r\n        const paymentObj = {\r\n          card: payment.card,\r\n          created: payment.created,\r\n          paymentId: payment.id,\r\n          type: payment.type,\r\n          amount: this.listingData.payout,\r\n          account: this.listingData.payoutAccount,\r\n          sortcode: this.listingData.sortcode,\r\n          seller: this.listingData.sellerId,\r\n          buyer: this.userId,\r\n          ticketRef: this.listingData.ticketRef\r\n        };\r\n        await this.aes\r\n        .encrypt(this.secureKey, this.secureIV, this.cardNo)\r\n        .then(promise => (this.encryptedText = promise.valueOf()))\r\n        .catch((error: any) => console.error(error));\r\n        const buyerObj = {\r\n        Artist: this.listingData.artist,\r\n        Venue: this.listingData.location,\r\n        Date: this.listingData.date,\r\n        Price: this.listingData.price,\r\n        Card: this.encryptedText,\r\n        eKey: this.secureKey,\r\n        eIV: this.secureIV,\r\n        Ticket: this.listingData.downloadURL,\r\n        Time: this.listingData.time\r\n        }\r\n        const sellerObj = {\r\n        Artist: this.listingData.artist,\r\n        Venue: this.listingData.location,\r\n        Date: this.listingData.date,\r\n        Price: this.listingData.price,\r\n        Status: 'Pending',\r\n        AccountNo: this.listingData.payoutAccount,\r\n        SortCode: this.listingData.sortcode,\r\n        FundRelease: (Date.now() + 86400000),\r\n        }\r\n        this.afDatabase\r\n          .list(`payments/`)\r\n          .push(paymentObj)\r\n          .then(buyer => {\r\n            this.afDatabase\r\n              .list(`bought/${this.userId}`)\r\n              .push(buyerObj);\r\n          })\r\n          .then(seller => {\r\n            this.afDatabase\r\n              .list(`sold/${this.listingData.sellerId}`)\r\n              .push(sellerObj);\r\n          })\r\n          .then(basket => {\r\n            this.afDatabase\r\n              .list(\r\n                `ticketsInBasket/${this.userId}/${this.listingData.ticketRef}`\r\n              )\r\n              .remove().then(navigation => {\r\n                this.toast.create({message: 'Payment successful', duration:2000, position:'middle'}).present();\r\n                this.close();\r\n                this.navCtrl.setRoot('Page');\r\n                this.navCtrl.push('OrderHistoryPage').catch(error => {\r\n                console.log(error);\r\n                })\r\n              })\r\n          });\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  clearForm() {\r\n    this.cardName = null;\r\n    this.CVC = null;\r\n    this.cardNo = null;\r\n    this.expiry = null;\r\n  }\r\n\r\ncheckOutTimer(){\r\n  this.timer = setInterval(\r\n    () =>\r\n      this.updateSeconds(\r\n        this.minutes,\r\n        (this.seconds = this.seconds - 1)\r\n      ),\r\n    1000\r\n  );\r\n  console.log({ minutes: this.minutes, seconds: this.seconds});\r\n}\r\n\r\nupdateSeconds(minutes: number, seconds: number) {\r\nif (this.seconds < 10){\r\nthis.belowTen = \"0\" }\r\nif (this.minutes< 10){\r\nthis.belowTenMin = \"0\"\r\nif (this.seconds <= 0) {\r\nthis.seconds = this.seconds + 59;\r\nthis.minutes = this.minutes - 1;\r\nthis.belowTen = \"\";\r\nif (this.minutes == 0 && this.seconds <= 1 ) {\r\nthis.timeIsUp();\r\nthis.checkOutTimer();\r\n}\r\nconsole.log(minutes, seconds);\r\n}\r\n}\r\n}\r\n\r\ntimeIsUp() {\r\nclearInterval(this.timer);\r\n}\r\n\r\n  close() {\r\n    this.vCtrl.dismiss();\r\n  }\r\n\r\n  useExistingCard() {\r\n    var key = this.listingData.userId;\r\n    this.afDatabase\r\n      .object(`user/${key}`)\r\n      .snapshotChanges()\r\n      .subscribe(snapshot => {\r\n        var allData = snapshot.payload.val();\r\n        var value = Object.keys(allData);\r\n        var cardKey = value[0];\r\n        this.afDatabase\r\n          .object(`user/${key}/${cardKey}`)\r\n          .snapshotChanges()\r\n          .subscribe(async snapshot => {\r\n            const CardNo = snapshot.payload.child(`Card`).val();\r\n            const cardExpiry = snapshot.payload.child(`Expiry`).val();\r\n            const Holder = snapshot.payload.child(`Holder`).val();\r\n            const Key: string = snapshot.payload.child(`Key`).val();\r\n            const IV: string = snapshot.payload.child(`IV`).val();\r\n            var cardNoPlainText: string;\r\n            var cardExpiryPlainText: string;\r\n            var cardHolderPlainText: string;\r\n            await this.aes\r\n              .decrypt(Key, IV, CardNo)\r\n              .then(card => (cardNoPlainText = card))\r\n              .catch((error: any) => console.log(error));\r\n\r\n            await this.aes\r\n              .decrypt(Key, IV, cardExpiry)\r\n              .then(exp => (cardExpiryPlainText = exp))\r\n              .catch((error: any) => console.log(error));\r\n\r\n            await this.aes\r\n              .decrypt(Key, IV, Holder)\r\n              .then(holder => (cardHolderPlainText = holder))\r\n              .catch((error: any) => console.log(error));\r\n\r\n            var CardSubStr = cardNoPlainText.toString().substr(16);\r\n            let alert = this.aCtrl.create({\r\n              mode: \"ios\",\r\n              title: \"Use saved card to pay?\",\r\n              message:\r\n                \"Use card ending in\" +\r\n                \" XXXX-X\" +\r\n                CardSubStr +\r\n                \" \" +\r\n                \"for payment?\",\r\n              cssClass: \"alert-button-group\",\r\n              buttons: [\r\n                {\r\n                  text: \"Proceed\",\r\n\r\n                  handler: () => {\r\n                    this.cardName = cardHolderPlainText;\r\n                    this.cardNo = cardNoPlainText;\r\n                    this.expiry = cardExpiryPlainText;\r\n                  }\r\n                },\r\n                {\r\n                  text: \"Dismiss\",\r\n                  role: \"cancel\",\r\n                  handler: () => {\r\n                    console.log(\"Cancel clicked\");\r\n                  }\r\n                }\r\n              ]\r\n            });\r\n            alert.present();\r\n          });\r\n      });\r\n  }\r\n\r\n  confirmPayment() {\r\n    let alert = this.aCtrl.create({\r\n      title: \"Confirm this payment\",\r\n      subTitle: \"This is going to cost\" + \" \" + this.listingData.price + \".\",\r\n      message:\r\n        \"\" +\r\n        this.listingData.artist +\r\n        \" \" +\r\n        \"at\" +\r\n        \" \" +\r\n        this.listingData.location +\r\n        \"<br>\" +\r\n        this.listingData.date +\r\n        \"<br>\" +\r\n        this.listingData.time,\r\n      cssClass: \"alert-button-group\",\r\n      mode: \"ios\",\r\n      buttons: [\r\n        {\r\n          text: \"Proceed\",\r\n          cssClass: \"alertButton\",\r\n          handler: () => {\r\n            if (this.cardName == \"\" || this.cardName == null) {\r\n              this.toast\r\n                .create({\r\n                  message: \"Card holder field is empty\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else if (this.cardNo.length != 19) {\r\n              this.toast\r\n                .create({\r\n                  message: \"Card number should be 16 digits\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else if (\r\n              this.CVC == null ||\r\n              this.CVC == \"\" ||\r\n              this.CVC.length != 3\r\n            ) {\r\n              this.toast\r\n                .create({\r\n                  message: \"CVC field is empty or not 3 characters long\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else if (\r\n              this.expiry == null ||\r\n              this.expiry == \"\" ||\r\n              this.expiry.length != 5\r\n            ) {\r\n              this.toast\r\n                .create({\r\n                  message: \"Expiry is empty or exceeds reqired length\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else {\r\n              console.log(this.listingData.userId);\r\n              var transactionRef = [\r\n                {\r\n                  Seller: this.listingData.sellerId,\r\n                  TicketRef: this.listingData.ticketRef,\r\n                  Buyer: this.listingData.userId,\r\n                  Price: this.listingData.price,\r\n                  SellerPayout: this.listingData.payout,\r\n                  ttRevenue: this.listingData.charge,\r\n                  PayeeAccountNo: this.listingData.payoutAccount,\r\n                  Payout: this.listingData.payout\r\n                }\r\n              ];\r\n\r\n              var transRefNo = this.afDatabase\r\n                .list(`transactions`)\r\n                .push(transactionRef[0]).key;\r\n              var buyerRef = [\r\n                {\r\n                  transactionRef: transRefNo,\r\n                  TicketRef: this.listingData.ticketRef,\r\n                  Paid: this.listingData.price,\r\n                  FileUrl: this.listingData.FileUrl\r\n                }\r\n              ];\r\n\r\n              var sellerRef = [\r\n                {\r\n                  Artist: this.listingData.artist,\r\n                  transactionRef: transRefNo,\r\n                  TicketRef: this.listingData.ticketRef,\r\n                  Payout: this.listingData.payout,\r\n                  Status: \"Pending\"\r\n                }\r\n              ];\r\n\r\n              var saleArchive = [\r\n                {\r\n                  Seller: this.listingData.sellerId,\r\n                  Event: this.listingData.artist,\r\n                  Location: this.listingData.location,\r\n                  Long: this.listingData.long,\r\n                  Lat: this.listingData.lat,\r\n                  Time: this.listingData.time,\r\n                  Date: this.listingData.date,\r\n                  Buyer: this.listingData.userId,\r\n                  Price: this.listingData.price,\r\n                  Payout: this.listingData.payout,\r\n                  transactionRef: transRefNo\r\n                }\r\n              ];\r\n\r\n              console.log(transactionRef, buyerRef, transRefNo);\r\n              this.afDatabase\r\n                .list(`ticketsBought/${this.listingData.userId}`)\r\n                .push(buyerRef[0]);\r\n              this.afDatabase\r\n                .list(`ticketsSold/${this.listingData.userId}`)\r\n                .push(sellerRef[0]);\r\n              this.afDatabase\r\n                .object(`saleArchive/${this.listingData.ticketRef}`)\r\n                .set(saleArchive[0]);\r\n              this.close();\r\n              this.navCtrl.setRoot(\"Page\");\r\n            }\r\n          }\r\n        },\r\n        {\r\n          text: \"Cancel\",\r\n          cssClass: \"alertButton\",\r\n          handler: () => {\r\n            console.log(\"Cancel clicked\");\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment-modal/payment-modal.ts"],"sourceRoot":""}