{"version":3,"sources":["../../src/pages/payment-modal/payment-modal.module.ts","../../src/pages/payment-modal/payment-modal.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACG;AAMnD;IAAA;IAAqC,CAAC;IAAzB,sBAAsB;QAJlC,uEAAQ,CAAC;YACR,YAAY,EAAE,CAAC,wEAAgB,CAAC;YAChC,OAAO,EAAE,CAAC,sEAAe,CAAC,QAAQ,CAAC,wEAAgB,CAAC,CAAC;SACtD,CAAC;OACW,sBAAsB,CAAG;IAAD,6BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRO;AACiE;AAC/C;AACb;AAO/C;IACE,0BACS,SAAoB,EACnB,KAAsB,EACtB,KAAqB,EACrB,UAA+B,EAC/B,GAAW,EACX,KAAsB,EACtB,OAAsB;QANvB,cAAS,GAAT,SAAS,CAAW;QACnB,UAAK,GAAL,KAAK,CAAiB;QACtB,UAAK,GAAL,KAAK,CAAgB;QACrB,eAAU,GAAV,UAAU,CAAqB;QAC/B,QAAG,GAAH,GAAG,CAAQ;QACX,UAAK,GAAL,KAAK,CAAiB;QACtB,YAAO,GAAP,OAAO,CAAe;IAC7B,CAAC;IAOJ,0CAAe,GAAf;QACE,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;QAC1B,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACpB,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,gCAAK,GAAL;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;IACvB,CAAC;IAED,0CAAe,GAAf;QAAA,iBAqEC;QApEC,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAClC,IAAI,CAAC,UAAU;aACZ,MAAM,CAAC,UAAQ,GAAK,CAAC;aACrB,eAAe,EAAE;aACjB,SAAS,CAAC,kBAAQ;YACjB,IAAI,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;YACrC,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACjC,IAAI,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACvB,KAAI,CAAC,UAAU;iBACZ,MAAM,CAAC,UAAQ,GAAG,SAAI,OAAS,CAAC;iBAChC,eAAe,EAAE;iBACjB,SAAS,CAAC,UAAM,QAAQ;;;;;;4BACjB,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC;4BAC9C,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC;4BACpD,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC;4BAChD,GAAG,GAAW,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC;4BAClD,EAAE,GAAW,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;4BAItD,qBAAM,IAAI,CAAC,GAAG;qCACX,OAAO,CAAC,GAAG,EAAE,EAAE,EAAE,MAAM,CAAC;qCACxB,IAAI,CAAC,cAAI,IAAI,QAAC,eAAe,GAAG,IAAI,CAAC,EAAxB,CAAwB,CAAC;qCACtC,KAAK,CAAC,UAAC,KAAU,IAAK,cAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAAC;;4BAH5C,SAG4C,CAAC;4BAE7C,qBAAM,IAAI,CAAC,GAAG;qCACX,OAAO,CAAC,GAAG,EAAE,EAAE,EAAE,UAAU,CAAC;qCAC5B,IAAI,CAAC,aAAG,IAAI,QAAC,mBAAmB,GAAG,GAAG,CAAC,EAA3B,CAA2B,CAAC;qCACxC,KAAK,CAAC,UAAC,KAAU,IAAK,cAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAAC;;4BAH5C,SAG4C,CAAC;4BAE7C,qBAAM,IAAI,CAAC,GAAG;qCACX,OAAO,CAAC,GAAG,EAAE,EAAE,EAAE,MAAM,CAAC;qCACxB,IAAI,CAAC,gBAAM,IAAI,QAAC,mBAAmB,GAAG,MAAM,CAAC,EAA9B,CAA8B,CAAC;qCAC9C,KAAK,CAAC,UAAC,KAAU,IAAK,cAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAAC;;4BAH5C,SAG4C,CAAC;4BAEzC,UAAU,GAAG,eAAe,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;4BACnD,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gCAC5B,IAAI,EAAE,KAAK;gCACX,KAAK,EAAE,wBAAwB;gCAC/B,OAAO,EACL,oBAAoB;oCACpB,SAAS;oCACT,UAAU;oCACV,GAAG;oCACH,cAAc;gCAChB,QAAQ,EAAE,oBAAoB;gCAC9B,OAAO,EAAE;oCACP;wCACE,IAAI,EAAE,SAAS;wCAEf,OAAO,EAAE;4CACP,KAAI,CAAC,QAAQ,GAAG,mBAAmB,CAAC;4CACpC,KAAI,CAAC,MAAM,GAAG,eAAe,CAAC;4CAC9B,KAAI,CAAC,MAAM,GAAG,mBAAmB,CAAC;wCACpC,CAAC;qCACF;oCACD;wCACE,IAAI,EAAE,SAAS;wCACf,IAAI,EAAE,QAAQ;wCACd,OAAO,EAAE;4CACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;wCAChC,CAAC;qCACF;iCACF;6BACF,CAAC,CAAC;4BACH,KAAK,CAAC,OAAO,EAAE,CAAC;;;;iBACjB,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED,yCAAc,GAAd;QAAA,iBA4IC;QA3IC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;YAC5B,KAAK,EAAE,sBAAsB;YAC7B,QAAQ,EAAE,uBAAuB,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,GAAG;YACtE,OAAO,EACL,EAAE;gBACF,IAAI,CAAC,WAAW,CAAC,MAAM;gBACvB,GAAG;gBACH,IAAI;gBACJ,GAAG;gBACH,IAAI,CAAC,WAAW,CAAC,QAAQ;gBACzB,MAAM;gBACN,IAAI,CAAC,WAAW,CAAC,IAAI;gBACrB,MAAM;gBACN,IAAI,CAAC,WAAW,CAAC,IAAI;YACvB,QAAQ,EAAE,oBAAoB;YAC9B,IAAI,EAAE,KAAK;YACX,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,SAAS;oBACf,QAAQ,EAAE,aAAa;oBACvB,OAAO,EAAE;wBACP,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,IAAI,EAAE,IAAI,KAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;4BACjD,KAAI,CAAC,KAAK;iCACP,MAAM,CAAC;gCACN,OAAO,EAAE,4BAA4B;gCACrC,QAAQ,EAAE,IAAI;gCACd,QAAQ,EAAE,QAAQ;6BACnB,CAAC;iCACD,OAAO,EAAE,CAAC;wBACf,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC;4BACpC,KAAI,CAAC,KAAK;iCACP,MAAM,CAAC;gCACN,OAAO,EAAE,iCAAiC;gCAC1C,QAAQ,EAAE,IAAI;gCACd,QAAQ,EAAE,QAAQ;6BACnB,CAAC;iCACD,OAAO,EAAE,CAAC;wBACf,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CACR,KAAI,CAAC,GAAG,IAAI,IAAI;4BAChB,KAAI,CAAC,GAAG,IAAI,EAAE;4BACd,KAAI,CAAC,GAAG,CAAC,MAAM,IAAI,CACrB,CAAC,CAAC,CAAC;4BACD,KAAI,CAAC,KAAK;iCACP,MAAM,CAAC;gCACN,OAAO,EAAE,6CAA6C;gCACtD,QAAQ,EAAE,IAAI;gCACd,QAAQ,EAAE,QAAQ;6BACnB,CAAC;iCACD,OAAO,EAAE,CAAC;wBACf,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CACR,KAAI,CAAC,MAAM,IAAI,IAAI;4BACnB,KAAI,CAAC,MAAM,IAAI,EAAE;4BACjB,KAAI,CAAC,MAAM,CAAC,MAAM,IAAI,CACxB,CAAC,CAAC,CAAC;4BACD,KAAI,CAAC,KAAK;iCACP,MAAM,CAAC;gCACN,OAAO,EAAE,2CAA2C;gCACpD,QAAQ,EAAE,IAAI;gCACd,QAAQ,EAAE,QAAQ;6BACnB,CAAC;iCACD,OAAO,EAAE,CAAC;wBACf,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;4BACrC,IAAI,cAAc,GAAG;gCACnB;oCACE,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,QAAQ;oCACjC,SAAS,EAAE,KAAI,CAAC,WAAW,CAAC,SAAS;oCACrC,KAAK,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCAC9B,KAAK,EAAE,KAAI,CAAC,WAAW,CAAC,KAAK;oCAC7B,YAAY,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCACrC,SAAS,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCAClC,cAAc,EAAE,KAAI,CAAC,WAAW,CAAC,aAAa;oCAC9C,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;iCAChC;6BACF,CAAC;4BAEF,IAAI,UAAU,GAAG,KAAI,CAAC,UAAU;iCAC7B,IAAI,CAAC,cAAc,CAAC;iCACpB,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;4BAC/B,IAAI,QAAQ,GAAG;gCACb;oCACE,cAAc,EAAE,UAAU;oCAC1B,SAAS,EAAE,KAAI,CAAC,WAAW,CAAC,SAAS;oCACrC,IAAI,EAAE,KAAI,CAAC,WAAW,CAAC,KAAK;oCAC5B,OAAO,EAAE,kBAAkB;iCAC5B;6BACF,CAAC;4BAEF,IAAI,SAAS,GAAG;gCACd;oCACE,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCAC/B,cAAc,EAAE,UAAU;oCAC1B,SAAS,EAAE,KAAI,CAAC,WAAW,CAAC,SAAS;oCACrC,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCAC/B,MAAM,EAAE,SAAS;iCAClB;6BACF,CAAC;4BAEF,IAAI,WAAW,GAAG;gCAChB;oCACE,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,QAAQ;oCACjC,KAAK,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCAC9B,QAAQ,EAAE,KAAI,CAAC,WAAW,CAAC,QAAQ;oCACnC,IAAI,EAAE,KAAI,CAAC,WAAW,CAAC,IAAI;oCAC3B,GAAG,EAAE,KAAI,CAAC,WAAW,CAAC,GAAG;oCACzB,IAAI,EAAE,KAAI,CAAC,WAAW,CAAC,IAAI;oCAC3B,IAAI,EAAE,KAAI,CAAC,WAAW,CAAC,IAAI;oCAC3B,KAAK,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCAC9B,KAAK,EAAE,KAAI,CAAC,WAAW,CAAC,KAAK;oCAC7B,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM;oCAC/B,cAAc,EAAE,UAAU;iCAC3B;6BACF,CAAC;4BAEF,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;4BAClD,KAAI,CAAC,UAAU;iCACZ,IAAI,CAAC,mBAAiB,KAAI,CAAC,WAAW,CAAC,MAAQ,CAAC;iCAChD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;4BACrB,KAAI,CAAC,UAAU;iCACZ,IAAI,CAAC,iBAAe,KAAI,CAAC,WAAW,CAAC,MAAQ,CAAC;iCAC9C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;4BACtB,KAAI,CAAC,UAAU;iCACZ,MAAM,CAAC,iBAAe,KAAI,CAAC,WAAW,CAAC,SAAW,CAAC;iCACnD,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;4BACvB,KAAI,CAAC,KAAK,EAAE,CAAC;4BACb,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;wBAC/B,CAAC;oBACH,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,QAAQ;oBACd,QAAQ,EAAE,aAAa;oBACvB,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IA9OU,gBAAgB;QAJ5B,wEAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;WACG;SAClC,CAAC;mFAG6B;YACZ,sEAAe;YACf,0EAAc;YACT,sEAAmB;YAC1B,sEAAM;YACJ,sEAAe;YACb,aAAa;OARrB,gBAAgB,CA+O5B;IAAD,CAAC;AAAA;SA/OY,gBAAgB,gB","file":"4.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { IonicPageModule } from \"ionic-angular\";\nimport { PaymentModalPage } from \"./payment-modal\";\n\n@NgModule({\n  declarations: [PaymentModalPage],\n  imports: [IonicPageModule.forChild(PaymentModalPage)]\n})\nexport class PaymentModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment-modal/payment-modal.module.ts","import { Component } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  NavParams,\r\n  ViewController,\r\n  AlertController,\r\n  ToastController,\r\n  NavController\r\n} from \"ionic-angular\";\r\nimport { AngularFireDatabase } from \"angularfire2/database\";\r\nimport { AES256 } from \"@ionic-native/aes-256\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-payment-modal\",\r\n  templateUrl: \"payment-modal.html\"\r\n})\r\nexport class PaymentModalPage {\r\n  constructor(\r\n    public navParams: NavParams,\r\n    private aCtrl: AlertController,\r\n    private vCtrl: ViewController,\r\n    private afDatabase: AngularFireDatabase,\r\n    private aes: AES256,\r\n    private toast: ToastController,\r\n    private navCtrl: NavController\r\n  ) {}\r\n  listingData: any;\r\n  cardName: any;\r\n  CVC: any;\r\n  cardNo: any;\r\n  expiry: any;\r\n\r\n  ionViewWillLoad() {\r\n    const ticket = this.navParams.get(\"ticket\");\r\n    this.listingData = ticket;\r\n    console.log(ticket);\r\n    this.useExistingCard();\r\n  }\r\n\r\n  close() {\r\n    this.vCtrl.dismiss();\r\n  }\r\n\r\n  useExistingCard() {\r\n    var key = this.listingData.userId;\r\n    this.afDatabase\r\n      .object(`user/${key}`)\r\n      .snapshotChanges()\r\n      .subscribe(snapshot => {\r\n        var allData = snapshot.payload.val();\r\n        var value = Object.keys(allData);\r\n        var cardKey = value[0];\r\n        this.afDatabase\r\n          .object(`user/${key}/${cardKey}`)\r\n          .snapshotChanges()\r\n          .subscribe(async snapshot => {\r\n            const CardNo = snapshot.payload.child(`Card`).val();\r\n            const cardExpiry = snapshot.payload.child(`Expiry`).val();\r\n            const Holder = snapshot.payload.child(`Holder`).val();\r\n            const Key: string = snapshot.payload.child(`Key`).val();\r\n            const IV: string = snapshot.payload.child(`IV`).val();\r\n            var cardNoPlainText: string;\r\n            var cardExpiryPlainText: string;\r\n            var cardHolderPlainText: string;\r\n            await this.aes\r\n              .decrypt(Key, IV, CardNo)\r\n              .then(card => (cardNoPlainText = card))\r\n              .catch((error: any) => console.log(error));\r\n\r\n            await this.aes\r\n              .decrypt(Key, IV, cardExpiry)\r\n              .then(exp => (cardExpiryPlainText = exp))\r\n              .catch((error: any) => console.log(error));\r\n\r\n            await this.aes\r\n              .decrypt(Key, IV, Holder)\r\n              .then(holder => (cardHolderPlainText = holder))\r\n              .catch((error: any) => console.log(error));\r\n\r\n            var CardSubStr = cardNoPlainText.toString().substr(16);\r\n            let alert = this.aCtrl.create({\r\n              mode: \"ios\",\r\n              title: \"Use saved card to pay?\",\r\n              message:\r\n                \"Use card ending in\" +\r\n                \" XXXX-X\" +\r\n                CardSubStr +\r\n                \" \" +\r\n                \"for payment?\",\r\n              cssClass: \"alert-button-group\",\r\n              buttons: [\r\n                {\r\n                  text: \"Proceed\",\r\n\r\n                  handler: () => {\r\n                    this.cardName = cardHolderPlainText;\r\n                    this.cardNo = cardNoPlainText;\r\n                    this.expiry = cardExpiryPlainText;\r\n                  }\r\n                },\r\n                {\r\n                  text: \"Dismiss\",\r\n                  role: \"cancel\",\r\n                  handler: () => {\r\n                    console.log(\"Cancel clicked\");\r\n                  }\r\n                }\r\n              ]\r\n            });\r\n            alert.present();\r\n          });\r\n      });\r\n  }\r\n\r\n  confirmPayment() {\r\n    let alert = this.aCtrl.create({\r\n      title: \"Confirm this payment\",\r\n      subTitle: \"This is going to cost\" + \" \" + this.listingData.price + \".\",\r\n      message:\r\n        \"\" +\r\n        this.listingData.artist +\r\n        \" \" +\r\n        \"at\" +\r\n        \" \" +\r\n        this.listingData.location +\r\n        \"<br>\" +\r\n        this.listingData.date +\r\n        \"<br>\" +\r\n        this.listingData.time,\r\n      cssClass: \"alert-button-group\",\r\n      mode: \"ios\",\r\n      buttons: [\r\n        {\r\n          text: \"Proceed\",\r\n          cssClass: \"alertButton\",\r\n          handler: () => {\r\n            if (this.cardName == \"\" || this.cardName == null) {\r\n              this.toast\r\n                .create({\r\n                  message: \"Card holder field is empty\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else if (this.cardNo.length != 19) {\r\n              this.toast\r\n                .create({\r\n                  message: \"Card number should be 16 digits\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else if (\r\n              this.CVC == null ||\r\n              this.CVC == \"\" ||\r\n              this.CVC.length != 3\r\n            ) {\r\n              this.toast\r\n                .create({\r\n                  message: \"CVC field is empty or not 3 characters long\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else if (\r\n              this.expiry == null ||\r\n              this.expiry == \"\" ||\r\n              this.expiry.length != 5\r\n            ) {\r\n              this.toast\r\n                .create({\r\n                  message: \"Expiry is empty or exceeds reqired length\",\r\n                  duration: 2000,\r\n                  position: \"middle\"\r\n                })\r\n                .present();\r\n            } else {\r\n              console.log(this.listingData.userId);\r\n              var transactionRef = [\r\n                {\r\n                  Seller: this.listingData.sellerId,\r\n                  TicketRef: this.listingData.ticketRef,\r\n                  Buyer: this.listingData.userId,\r\n                  Price: this.listingData.price,\r\n                  SellerPayout: this.listingData.payout,\r\n                  ttRevenue: this.listingData.charge,\r\n                  PayeeAccountNo: this.listingData.payoutAccount,\r\n                  Payout: this.listingData.payout\r\n                }\r\n              ];\r\n\r\n              var transRefNo = this.afDatabase\r\n                .list(`transactions`)\r\n                .push(transactionRef[0]).key;\r\n              var buyerRef = [\r\n                {\r\n                  transactionRef: transRefNo,\r\n                  TicketRef: this.listingData.ticketRef,\r\n                  Paid: this.listingData.price,\r\n                  FileUrl: \"www.firebase.com\"\r\n                }\r\n              ];\r\n\r\n              var sellerRef = [\r\n                {\r\n                  Artist: this.listingData.artist,\r\n                  transactionRef: transRefNo,\r\n                  TicketRef: this.listingData.ticketRef,\r\n                  Payout: this.listingData.payout,\r\n                  Status: \"Pending\"\r\n                }\r\n              ];\r\n\r\n              var saleArchive = [\r\n                {\r\n                  Seller: this.listingData.sellerId,\r\n                  Event: this.listingData.artist,\r\n                  Location: this.listingData.location,\r\n                  Long: this.listingData.long,\r\n                  Lat: this.listingData.lat,\r\n                  Time: this.listingData.time,\r\n                  Date: this.listingData.date,\r\n                  Buyer: this.listingData.userId,\r\n                  Price: this.listingData.price,\r\n                  Payout: this.listingData.payout,\r\n                  transactionRef: transRefNo\r\n                }\r\n              ];\r\n\r\n              console.log(transactionRef, buyerRef, transRefNo);\r\n              this.afDatabase\r\n                .list(`ticketsBought/${this.listingData.userId}`)\r\n                .push(buyerRef[0]);\r\n              this.afDatabase\r\n                .list(`ticketsSold/${this.listingData.userId}`)\r\n                .push(sellerRef[0]);\r\n              this.afDatabase\r\n                .object(`saleArchive/${this.listingData.ticketRef}`)\r\n                .set(saleArchive[0]);\r\n              this.close();\r\n              this.navCtrl.setRoot(\"Page\");\r\n            }\r\n          }\r\n        },\r\n        {\r\n          text: \"Cancel\",\r\n          cssClass: \"alertButton\",\r\n          handler: () => {\r\n            console.log(\"Cancel clicked\");\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment-modal/payment-modal.ts"],"sourceRoot":""}