{"version":3,"sources":["../../src/pages/add-card-modal/add-card-modal.module.ts","../../src/pages/add-card-modal/add-card-modal.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddCardModalPage } from './add-card-modal';\n\n@NgModule({\n  declarations: [\n    AddCardModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddCardModalPage),\n  ],\n})\nexport class AddCardModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-card-modal/add-card-modal.module.ts","import { Component } from \"@angular/core\";\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  ViewController,\n  ToastController\n} from \"ionic-angular\";\nimport { AngularFireDatabase } from \"angularfire2/database/\";\nimport { AngularFireAuth } from \"angularfire2/auth/\";\nimport { AES256 } from '@ionic-native/aes-256';\n\n\n@IonicPage()\n@Component({\n  selector: \"page-add-card-modal\",\n  templateUrl: \"add-card-modal.html\"\n})\nexport class AddCardModalPage {\n  eItems = [];\n  private secureKey: string;\n  private secureIV: string;\n  cardNo: any;\n  expiry: any;\n  Cvc: any;\n  sortcode: any;\n  accountNumber: any;\n  holderName:any;\n\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private vCtrl: ViewController,\n    private afDatabase: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    private toast: ToastController,\n    private aes: AES256\n  ) {\n    this.generateSecureKeyAndIV();\n  }\n\n  close() {\n    this.vCtrl.dismiss();\n  }\n\n\n  addDetails() {\n    var formatExpiry = this.expiry.toString().substr(0,2)+'/'+this.expiry.toString().substr(2,2)\n    var formatSortCode = this.sortcode.toString().substr(0,2)+'-'+this.sortcode.toString().substr(2,2)+'-'+this.sortcode.toString().substr(4,2);\n    console.log(formatSortCode, formatExpiry);\n    this.sortcode = formatSortCode;\n    this.expiry = formatExpiry;\n    var key = this.afAuth.auth.currentUser.uid;\n    if(this.holderName == ' ' && this.cardNo == ' '){\n    this.toast.create({message:'One or more fields are empty', duration:2000, position:'middle'}).present();\n    }else if (this.holderName == undefined || this.holderName == ' ' || this.holderName == null){\n    this.toast.create({message: 'Cardholder cannot be empty.', duration:2000, position:'middle'}).present();\n    }else if (this.cardNo.length != 16){\n    this.toast.create({message: 'Card number Must be 16 digits.', duration:2000, position:'middle'}).present();\n    }else if ( this.sortcode.length != 8){\n    this.toast.create({message:'Sortcode Must be 6 digits.', duration:2000, position:'middle'}).present();\n    }else if (this.accountNumber.length != 8){\n    this.toast.create({message:'Account number Must be 8 digits.', duration:2000, position:'middle'}).present();\n    }else if ( this.Cvc.length != 3){\n    this.toast.create({message:'CVC must be 3 digits', duration:2000, position:'middle'}).present();  \n    }else if (this.expiry.length != 5){\n    this.toast.create({message:'Must be MM/YY', duration:2000, position:'middle'}).present(); \n    }else{\n      this.aes.encrypt(this.secureKey, this.secureIV, this.cardNo).then(res => (this.eItems.push(res), console.log(res)))\n      .catch((error: any) => console.error(error));\n    this.aes.encrypt(this.secureKey, this.secureIV, this.accountNumber).then(res => (this.eItems.push(res), console.log(res)))\n      .catch((error: any) => console.error(error));\n    this.aes.encrypt(this.secureKey, this.secureIV, this.sortcode).then(res => (this.eItems.push(res), console.log(res)))\n      .catch((error: any) => console.error(error));\n      console.log(this.eItems.values());\n      const cardHash = this.eItems[0].toString();\n      const sortHash = this.eItems[1].toString();\n      const accountNoHash = this.eItems[2].toString();\n      console.log(cardHash, sortHash, accountNoHash);\n    var payment = [{\n      Holder: this.holderName,\n      Card: cardHash,\n      Expiry: this.expiry,\n      CVC: this.Cvc,\n      Sort: sortHash,\n      AccountNo: accountNoHash\n    }]\n    console.log(payment);\n    this.afDatabase.list(`user/${key}`).push(payment[0]);\n    this.close();\n  }\n}\n\nasync generateSecureKeyAndIV() {\n  this.secureKey = await this.aes.generateSecureKey('pook'); // Returns a 32 bytes string\n  this.secureIV = await this.aes.generateSecureIV('pook'); // Returns a 16 bytes string\n}\n\n  ionViewDidLoad() {\n    console.log(\"ionViewDidLoad AddCardModalPage\");\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-card-modal/add-card-modal.ts"],"sourceRoot":""}