{"version":3,"sources":["../../src/pages/payment-modal/payment-modal.module.ts","../../src/pages/payment-modal/payment-modal.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { IonicPageModule } from \"ionic-angular\";\nimport { PaymentModalPage } from \"./payment-modal\";\n\n@NgModule({\n  declarations: [PaymentModalPage],\n  imports: [IonicPageModule.forChild(PaymentModalPage)]\n})\nexport class PaymentModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment-modal/payment-modal.module.ts","import { Component } from \"@angular/core\";\nimport { IonicPage, NavParams, ViewController, AlertController } from \"ionic-angular\";\nimport { AngularFireDatabase } from \"angularfire2/database\";\n\n@IonicPage()\n@Component({\n  selector: \"page-payment-modal\",\n  templateUrl: \"payment-modal.html\"\n})\nexport class PaymentModalPage {\n  constructor(public navParams: NavParams, private aCtrl: AlertController, private vCtrl: ViewController, private afDatabase: AngularFireDatabase) {}\n  listingData: any;\n  cardName:any;\n  CVC:any;\n  cardNo:any;\n  expiry:any;\n\n  close() {\n    this.vCtrl.dismiss();\n  }\n\nuseExistingCard(){\n  var key = this.listingData.userId;\n  this.afDatabase.object(`user/${key}`).snapshotChanges().subscribe(snapshot => {\n  var allData = snapshot.payload.val()\n  var value = Object.keys(allData);\n  var cardKey = value[0];\n  this.afDatabase.object(`user/${key}/${cardKey}`).snapshotChanges().subscribe(snapshot => {\n  const CardNo = snapshot.payload.child(`Card`).val();\n  const CVC = snapshot.payload.child(`CVC`).val();\n  const Expiry = snapshot.payload.child(`Expiry`).val();\n  const Holder = snapshot.payload.child(`Holder`).val();\n  var CardSubStr =  CardNo.toString().substr(12, 4);\n  var expiryString = Expiry.toString().substr(0,2) + '/'+ Expiry.toString().substr(2,4);\n  var cardNoString = CardNo.toString().substr(0,4)+'-'+CardNo.toString().substr(4,4)+'-'+CardNo.toString().substr(8,4)+'-'+CardNo.toString().substr(12,4);\n  let alert = this.aCtrl.create({\n    title: 'Payment',\n    message: 'Use card ending in' + ' ' +CardSubStr + ' ' + 'for payment?',\n    buttons: [\n      {\n        text: 'NO',\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n        }\n      },\n      {\n        text: 'YES',\n        handler: () => {\n         this.cardName = Holder;\n         this.cardNo = cardNoString;\n         this.expiry = expiryString;\n         this.CVC = CVC;\n        }\n      }\n    ]\n  });\n  alert.present();\n})\n  })\n}\n\n  ionViewWillLoad() {\n    const ticket = this.navParams.get(\"ticket\");\n    this.listingData = ticket;\n    this.useExistingCard();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment-modal/payment-modal.ts"],"sourceRoot":""}