{"version":3,"sources":["../../src/pages/adminpayments/adminpayments.module.ts","../../src/pages/adminpayments/adminpayments.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AdminpaymentsPage } from './adminpayments';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AdminpaymentsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AdminpaymentsPage),\r\n  ],\r\n})\r\nexport class AdminpaymentsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/adminpayments/adminpayments.module.ts","import { Component } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  NavController,\r\n  NavParams,\r\n  ToastController,\r\n  App\r\n} from \"ionic-angular\";\r\nimport { AngularFireDatabase } from \"angularfire2/database\";\r\nimport { AngularFireAuth } from \"angularfire2/auth\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-adminpayments\",\r\n  templateUrl: \"adminpayments.html\"\r\n})\r\nexport class AdminpaymentsPage {\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private afAuth: AngularFireAuth,\r\n    private toast: ToastController,\r\n    private app: App,\r\n    private fbDatabase: AngularFireDatabase\r\n  ) {}\r\n  kA = [];\r\n  items = [];\r\n  items2 = [];\r\n  itemSearch = [];\r\n  ionViewDidLoad() {\r\n    this.retrievePayments();\r\n    this.copyItems();\r\n  }\r\n\r\n  logout() {\r\n    // Logs a user out\r\n    this.afAuth.auth.signOut().then(() => {\r\n      this.toast\r\n        .create({\r\n          message: \"Signed out\",\r\n          position: \"middle\",\r\n          duration: 3500\r\n        })\r\n        .present();\r\n      this.app.getRootNav().setRoot(\"LoginPage\");\r\n    });\r\n  }\r\n\r\n  retrievePayments() {\r\n    // Retrieve all of the unapproved tickets that are in the database, and creates an object for each one\r\n    var ref = this.fbDatabase.object(`payments/`);\r\n    ref.snapshotChanges().subscribe(snapshot => {\r\n      var allData = snapshot.payload.val();\r\n      var array = [];\r\n      array.push(allData);\r\n      var value = Object.keys(allData);\r\n      var keyArray = [];\r\n      keyArray.push(value);\r\n      for (var i = 0; i < value.length; i++) {\r\n        var x = 0;\r\n        var selectedIndex = i;\r\n        var keyValue = value[selectedIndex];\r\n        var indexSelecta = value.length - value.length + i;\r\n        var id = value[indexSelecta];\r\n        this.kA.push(id);\r\n        var ref = this.fbDatabase.object(`payments/${keyValue}`);\r\n        ref.snapshotChanges().subscribe(snapshot => {\r\n          const amount = snapshot.payload.child(`amount`).val();\r\n          const ref = snapshot.payload.child(`ticketRef`).val();\r\n          const pId = snapshot.payload.child(`paymentId`).val();\r\n          this.items.push({\r\n            Amount: amount,\r\n            Ref: ref,\r\n            pId: pId\r\n          });\r\n          x++;\r\n        });\r\n        console.log(this.items);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  initializeItems(): void {\r\n    this.itemSearch = this.items;\r\n  }\r\n\r\n  refresh(): void {\r\n    window.location.reload();\r\n  }\r\n\r\n  copyItems(): void {\r\n    this.items2 = this.items;\r\n  }\r\n\r\n  onCancel() {\r\n    this.itemSearch = this.items2;\r\n  }\r\n\r\n\r\n  getItems(searchbar) {\r\n    // Reset items back to all of the items\r\n    this.initializeItems();\r\n    console.log(this.itemSearch);\r\n    // set q to the value of the searchbar\r\n    var term = searchbar.srcElement.value;\r\n    console.log(term);\r\n    // if the value is an empty string don't filter the items\r\n    if (term == undefined || term == \"\") {\r\n      this.items = this.items2;\r\n      this.items.splice(this.items.length - 1);\r\n      console.log(this.items);\r\n    } else {\r\n      this.itemSearch = this.itemSearch.filter(v => {\r\n        if (v.Ref && term) {\r\n          if (v.Ref.toLowerCase().indexOf(term.toLowerCase()) > -1) {\r\n            this.items = this.itemSearch;\r\n            return true;\r\n          } else if (v.Amount && term) {\r\n            if (v.Amount.toLowerCase().indexOf(term.toLowerCase()) > -1) {\r\n              this.items = this.itemSearch;\r\n              return true;\r\n            } else if (v.pId && term) {\r\n              if (v.pId.toLowerCase().indexOf(term.toLowerCase()) > -1) {\r\n                this.items = this.itemSearch;\r\n                return true;\r\n            }\r\n          }\r\n            return false;\r\n          }\r\n        }\r\n      });\r\n      console.log(term, this.itemSearch.length, this.itemSearch);\r\n      this.items.push(this.itemSearch);\r\n      this.reloadData();\r\n    }\r\n  }\r\n\r\n  reloadData() {\r\n    this.items = this.itemSearch;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/adminpayments/adminpayments.ts"],"sourceRoot":""}